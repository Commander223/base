{
    "query" : {
        "term" : { "name" : "$metricName" }
    },
    "filter" : {
        "and" : [
            {
                "range" : {
                    "@timestamp" : {
                        "from" : "$startDate",
                        "to" : "$endDate"
                    }
                }
            },
            {
                "script" : {
                    "script" : "_source.log_host == \"$host\""
                }
            }
        ]
    },
    "sort" : {
        "@timestamp" : { "order" : "desc", "ignore_unmapped" : true }
    },
    "size" : 500
}