{
    "fields": ["host", "collectd_type", "read", "write", "@timestamp"],
    "query": {
        "filtered": {
            "filter": {
                "and": [
                    {
                        "range": {
                            "@timestamp": {
                                "from": "$startDate",
                                "to": "$endDate"
                            }
                        }
                    },
                    {
                        "terms": {
                            "host": $hosts
                        }
                    },
                    {
                        "terms": {
                            "collectd_type": $names
                        }
                    }
                ]
            }
        }
    },
    "sort": {
        "@timestamp": {
            "order": "desc",
            "ignore_unmapped": true
        }
    },
    "size": $limit
}