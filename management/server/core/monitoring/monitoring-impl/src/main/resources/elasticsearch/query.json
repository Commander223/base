{
  "query": {
    "filtered": {
      "query": {
        "match": {
          "collectd_type": "$metricName"
        }
      },
      "filter": {
        "and": [
          {
            "range": {
              "@timestamp": {
                "from": "$startDate",
                "to": "$endDate"
              }
            }
          },
          {
            "term": {
              "host": "$host"
            }
          }
        ]
      }
    }
  },
    "sort": {
        "@timestamp": {
            "order": "desc",
            "ignore_unmapped": true
        }
    },
  "size": 1000
}